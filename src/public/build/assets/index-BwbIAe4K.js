import{j as s,r as o,b as y,u as q,H as Q}from"./app-D9K0lIg2.js";import{d as F,u as L}from"./index-CoNroDVL.js";import{a as S,q as A}from"./index-CMWG4mbA.js";import{A as T}from"./app-layout-DjmuWQS6.js";import{B as d}from"./button-Cq0MOVKo.js";import{P as H,a as I,b as _,c as K}from"./popover-DKDeY4ci.js";import{S as O,T as B}from"./trash-C3FSZoTg.js";import{P as $}from"./placeholder-pattern-DEgDWVpB.js";import{D as z}from"./datatable-BVwayNB8.js";import{S as i,A as M}from"./pagination-Dd8pkajb.js";import{I as g}from"./input-Cdacpup9.js";import{t as b}from"./index-Ct_SG2XW.js";import{D as R,a as G,b as J,c as V,d as W,e as X}from"./dialog-66DR-adO.js";import{L as w}from"./label-CiFHFGZU.js";import{L as Y}from"./loader-circle-CEuOqHLg.js";/* empty css            */import"./index-BeC5lqBz.js";import"./index-BSy4OLH8.js";import"./app-img-logo-DWWu-s2u.js";import"./chevron-left-BV2a4pwW.js";const a=(e,r)=>({url:a.url(e,r),method:"get"});a.definition={methods:["get","head"],url:"/user/{user}"};a.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=S(e);const t={user:typeof e.user=="object"?e.user.id:e.user};return a.definition.url.replace("{user}",t.user.toString()).replace(/\/+$/,"")+A(r)};a.get=(e,r)=>({url:a.url(e,r),method:"get"});a.head=(e,r)=>({url:a.url(e,r),method:"head"});const v=(e,r)=>({action:a.url(e,r),method:"get"});v.get=(e,r)=>({action:a.url(e,r),method:"get"});v.head=(e,r)=>({action:a.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...r?.query??r?.mergeQuery??{}}}),method:"get"});a.form=v;const l=(e,r)=>({url:l.url(e,r),method:"put"});l.definition={methods:["put"],url:"/user/{user}"};l.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=S(e);const t={user:typeof e.user=="object"?e.user.id:e.user};return l.definition.url.replace("{user}",t.user.toString()).replace(/\/+$/,"")+A(r)};l.put=(e,r)=>({url:l.url(e,r),method:"put"});const C=(e,r)=>({action:l.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...r?.query??r?.mergeQuery??{}}}),method:"post"});C.put=(e,r)=>({action:l.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...r?.query??r?.mergeQuery??{}}}),method:"post"});l.form=C;const P={show:Object.assign(a,a),update:Object.assign(l,l)};function Z({openEdit:e,deleteUser:r}){return[{accessorKey:"id",header:"ID"},{accessorKey:"name",header:"Name"},{accessorKey:"email",header:"Email"},{id:"actions",header:"Actions",cell:({row:t})=>s.jsxs(H,{children:[s.jsx(I,{asChild:!0,children:s.jsx(d,{size:"icon",variant:"ghost",children:s.jsx("span",{"aria-label":"More actions",children:"⋯"})})}),s.jsxs(_,{className:"p-0 w-auto",children:[s.jsxs(d,{variant:"ghost",className:"w-full justify-start px-3 py-2 hover:bg-muted",onClick:()=>e(t.original),children:[s.jsx(O,{className:"mr-2 h-4 w-4"}),"Edit"]}),s.jsx(K,{asChild:!0,children:s.jsxs(d,{variant:"ghost",className:"w-full justify-start px-3 py-2 text-destructive hover:bg-muted",onClick:()=>r(t.original.id),children:[s.jsx(B,{className:"mr-2 h-4 w-4"}),"Delete"]})})]})]})}]}function ee({open:e,onOpenChange:r,userData:t}){const[p,f]=o.useState(""),[n,x]=o.useState(""),[c,m]=o.useState(!1);o.useEffect(()=>{t&&(f(t.name),x(t.email))},[t]);const j=()=>{t&&(m(!0),y.put(P.update(t.id).url,{name:p,email:n},{preserveState:!0,onSuccess:()=>{r(!1),m(!1),b.success("อัปเดตผู้ใช้เรียบร้อยแล้ว")},onError:()=>{m(!1),b.error("ไม่สามารถอัปเดตผู้ใช้ได้")}}))};return s.jsx(R,{open:e,onOpenChange:r,children:s.jsxs(G,{children:[s.jsxs(J,{children:[s.jsx(V,{children:"Edit User"}),s.jsx(W,{children:"Update user information"})]}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(w,{htmlFor:"name",className:"text-right",children:"Name"}),s.jsx(g,{id:"name",value:p,onChange:h=>f(h.target.value),className:"col-span-3"})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(w,{htmlFor:"email",className:"text-right",children:"Email"}),s.jsx(g,{id:"email",value:n,onChange:h=>x(h.target.value),className:"col-span-3"})]})]}),s.jsxs(X,{children:[s.jsx(d,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),s.jsxs(d,{onClick:j,disabled:c,children:[c&&s.jsx(Y,{className:"mr-2 h-4 w-4 animate-spin"}),c?"Saving...":"Save"]})]})]})})}const se=[{title:"Dashboard",href:F().url}];function Ae(){const{rows:e,filters:r}=q().props,[t,p]=o.useState(r?.search||""),[f,n]=o.useState(!1),[x,c]=o.useState(!1),[m,j]=o.useState(null),[h,N]=o.useState(!1),D=Z({openEdit:async u=>{c(!0),N(!0);try{const k=await(await fetch(P.show(u).url)).json();j(k)}finally{c(!1)}},deleteUser:u=>{confirm("Are you sure you want to delete this user?")}}),E=u=>{u&&y.get(u,{},{preserveState:!0,preserveScroll:!0,replace:!0,onStart:()=>n(!0),onFinish:()=>n(!1)})},U=()=>{y.get(L().url,{search:t},{preserveState:!0,replace:!0,onStart:()=>n(!0),onFinish:()=>n(!1)})};return s.jsxs(T,{breadcrumbs:se,children:[s.jsx(Q,{title:"Dashboard"}),s.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:s.jsxs("div",{className:"relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:[s.jsxs("div",{className:"flex gap-2 p-4",children:[s.jsx(g,{type:"search",placeholder:"Search users...",value:t,className:"lg:w-xs w-full",onChange:u=>p(u.target.value)}),s.jsx(d,{onClick:U,children:"Search"})]}),f?s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsx(i,{className:"h-8 w-full"}),s.jsx(i,{className:"h-8 w-full"}),s.jsx(i,{className:"h-8 w-full"}),s.jsx(i,{className:"h-8 w-full"}),s.jsx(i,{className:"h-8 w-full"}),s.jsx(i,{className:"h-8 w-full"}),s.jsx(i,{className:"h-8 w-full"}),s.jsx(i,{className:"h-8 w-full"}),s.jsx(i,{className:"h-8 w-full"}),s.jsx(i,{className:"h-8 w-full"})]}):e?s.jsxs("div",{className:"p-4",children:[s.jsx(z,{columns:D,data:e.data}),s.jsx("div",{className:"mt-6",children:s.jsx(M,{links:e.links,onPageChange:E})})]}):s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx($,{className:"h-24 w-24 text-muted-foreground"})})]})}),s.jsx(ee,{open:h,onOpenChange:N,userData:m})]})}export{Ae as default};
