import{j as o,a as T,r as d,u as C,H as F,b as v}from"./app-D9K0lIg2.js";import{A as H}from"./app-layout-DjmuWQS6.js";import{d as L,e as M}from"./index-CoNroDVL.js";import{c as k,B as m}from"./button-Cq0MOVKo.js";import{D as O,a as z,b as I,c as $}from"./dialog-66DR-adO.js";import{I as N}from"./input-Cdacpup9.js";import{t as A}from"./index-Ct_SG2XW.js";import{q as f,a as S}from"./index-CMWG4mbA.js";import{D as U}from"./datatable-BVwayNB8.js";import{S as B,A as K}from"./pagination-Dd8pkajb.js";import{P as R}from"./placeholder-pattern-DEgDWVpB.js";import{p as V}from"./index-Dv59kq7C.js";/* empty css            */import"./index-BeC5lqBz.js";import"./index-BSy4OLH8.js";import"./app-img-logo-DWWu-s2u.js";import"./chevron-left-BV2a4pwW.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],J=k("Pencil",G);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],X=k("Trash2",W),Y=({openEdit:e,deletePosition:t})=>[{accessorKey:"id",header:"#",cell:({row:i})=>i.index+1},{accessorKey:"name",header:"ชื่อตำแหน่ง"},{id:"actions",header:"การจัดการ",cell:({row:i})=>o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(m,{size:"icon",variant:"outline",onClick:()=>e(i.original),children:o.jsx(J,{className:"h-4 w-4"})}),o.jsx(m,{size:"icon",variant:"destructive",onClick:()=>t(i.original.id),children:o.jsx(X,{className:"h-4 w-4"})})]})}],n=e=>({url:n.url(e),method:"post"});n.definition={methods:["post"],url:"/position"};n.url=e=>n.definition.url+f(e);n.post=e=>({url:n.url(e),method:"post"});const q=e=>({action:n.url(e),method:"post"});q.post=e=>({action:n.url(e),method:"post"});n.form=q;const r=(e,t)=>({url:r.url(e,t),method:"get"});r.definition={methods:["get","head"],url:"/position/{position}"};r.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={position:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={position:e.id}),Array.isArray(e)&&(e={position:e[0]}),e=S(e);const i={position:typeof e.position=="object"?e.position.id:e.position};return r.definition.url.replace("{position}",i.position.toString()).replace(/\/+$/,"")+f(t)};r.get=(e,t)=>({url:r.url(e,t),method:"get"});r.head=(e,t)=>({url:r.url(e,t),method:"head"});const P=(e,t)=>({action:r.url(e,t),method:"get"});P.get=(e,t)=>({action:r.url(e,t),method:"get"});P.head=(e,t)=>({action:r.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});r.form=P;const s=(e,t)=>({url:s.url(e,t),method:"put"});s.definition={methods:["put","patch"],url:"/position/{position}"};s.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={position:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={position:e.id}),Array.isArray(e)&&(e={position:e[0]}),e=S(e);const i={position:typeof e.position=="object"?e.position.id:e.position};return s.definition.url.replace("{position}",i.position.toString()).replace(/\/+$/,"")+f(t)};s.put=(e,t)=>({url:s.url(e,t),method:"put"});s.patch=(e,t)=>({url:s.url(e,t),method:"patch"});const Q=(e,t)=>({action:s.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...t?.query??t?.mergeQuery??{}}}),method:"post"});Q.put=(e,t)=>({action:s.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...t?.query??t?.mergeQuery??{}}}),method:"post"});Q.patch=(e,t)=>({action:s.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...t?.query??t?.mergeQuery??{}}}),method:"post"});s.form=Q;const l=(e,t)=>({url:l.url(e,t),method:"delete"});l.definition={methods:["delete"],url:"/position/{position}"};l.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={position:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={position:e.id}),Array.isArray(e)&&(e={position:e[0]}),e=S(e);const i={position:typeof e.position=="object"?e.position.id:e.position};return l.definition.url.replace("{position}",i.position.toString()).replace(/\/+$/,"")+f(t)};l.delete=(e,t)=>({url:l.url(e,t),method:"delete"});const w=(e,t)=>({action:l.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});w.delete=(e,t)=>({action:l.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});l.form=w;const y={store:Object.assign(n,n),show:Object.assign(r,r),update:Object.assign(s,s),destroy:Object.assign(l,l)};function Z({open:e,onOpenChange:t,positionData:i}){const{data:x,setData:p,post:h,put:j,reset:c}=T({name:i?.name??""});d.useEffect(()=>{e&&(i?p("name",i.name??""):c())},[e,i]);const b=a=>{a.preventDefault(),i?j(y.update(i.id).url,{onSuccess:()=>{A.success("อัปเดตข้อมูลตำแหน่งเรียบร้อยแล้ว"),t(!1),c()}}):h(y.store().url,{onSuccess:()=>{A.success("เพิ่มตำแหน่งเรียบร้อยแล้ว"),t(!1),c()}})};return o.jsx(O,{open:e,onOpenChange:t,children:o.jsxs(z,{children:[o.jsx(I,{children:o.jsx($,{children:i?"แก้ไขตำแหน่ง":"เพิ่มตำแหน่งใหม่"})}),o.jsxs("form",{onSubmit:b,className:"space-y-4 mt-4",children:[o.jsx(N,{placeholder:"ชื่อตำแหน่ง",value:x.name,onChange:a=>p("name",a.target.value)}),o.jsx("div",{className:"flex justify-end",children:o.jsx(m,{type:"submit",children:"บันทึก"})})]})]})})}const ee=[{title:"Dashboard",href:L().url},{title:"Repository",href:M().url},{title:"Position",href:""}];function ve(){const{rows:e,filters:t}=C().props,[i,x]=d.useState(t?.search||""),[p,h]=d.useState(!1),[j,c]=d.useState(null),[b,a]=d.useState(!1),E=Y({openEdit:async u=>{a(!0);const D=await(await fetch(y.show(u).url)).json();c(D)},deletePosition:u=>{confirm("ต้องการลบตำแหน่งนี้หรือไม่?")&&v.delete(y.destroy(u).url,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{v.reload({only:["rows"]}),A.warning("ลบข้อมูลตำแหน่งเรียบร้อยแล้ว")}})}}),_=()=>{v.get(V.index().url,{search:i},{preserveState:!0,replace:!0,onStart:()=>h(!0),onFinish:()=>h(!1)})};return o.jsxs(H,{breadcrumbs:ee,children:[o.jsx(F,{title:"Position Management"}),o.jsxs("div",{className:"flex justify-between items-center p-4",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"ตำแหน่ง"}),o.jsx(m,{onClick:()=>{a(!0),c(null)},children:"เพิ่มตำแหน่ง"})]}),o.jsxs("div",{className:"p-4 flex gap-2",children:[o.jsx(N,{type:"search",placeholder:"ค้นหาชื่อตำแหน่ง...",value:i,onChange:u=>x(u.target.value)}),o.jsx(m,{onClick:_,children:"ค้นหา"})]}),p?o.jsx("div",{className:"p-4 space-y-3",children:Array.from({length:10}).map((u,g)=>o.jsx(B,{className:"h-8 w-full"},g))}):e?o.jsxs("div",{className:"p-4",children:[o.jsx(U,{columns:E,data:e.data}),o.jsx("div",{className:"mt-6",children:o.jsx(K,{links:e.links})})]}):o.jsx("div",{className:"flex justify-center items-center h-40",children:o.jsx(R,{className:"h-24 w-24 text-muted-foreground"})}),o.jsx(Z,{open:b,onOpenChange:a,positionData:j})]})}export{ve as default};
