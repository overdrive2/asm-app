import{j as e,a as A,r as c,u as F,H as E,b}from"./app-D9K0lIg2.js";import{d as V,e as T}from"./index-CoNroDVL.js";import{c as I}from"./index-Bid-T30R.js";import{A as K}from"./app-layout-DjmuWQS6.js";import{B as m,a as x}from"./button-Cq0MOVKo.js";import{P as L,a as H,b as B,c as R}from"./popover-DKDeY4ci.js";import{S as q,T as z}from"./trash-C3FSZoTg.js";import{P as M}from"./placeholder-pattern-DEgDWVpB.js";import{I as h}from"./input-Cdacpup9.js";import{S as O,A as U}from"./pagination-Dd8pkajb.js";import{D as G}from"./datatable-BVwayNB8.js";import{t as g}from"./index-Ct_SG2XW.js";import{D as J,a as Q,b as W,c as X,d as Y,e as Z}from"./dialog-66DR-adO.js";import{L as p}from"./label-CiFHFGZU.js";import{v as f}from"./index-W0y-KShr.js";import{C as $}from"./circle-plus-CoWCO5BP.js";/* empty css            */import"./index-CMWG4mbA.js";import"./index-BeC5lqBz.js";import"./index-BSy4OLH8.js";import"./app-img-logo-DWWu-s2u.js";import"./chevron-left-BV2a4pwW.js";function ee({openEdit:n,deleteVendor:d}){return[{accessorKey:"id",header:"ID"},{accessorKey:"name",header:"ชื่อร้าน/บริษัท"},{accessorKey:"address",header:"ที่อยู่"},{accessorKey:"owner_name",header:"ชื่อผู้ติดต่อ"},{accessorKey:"phone",header:"เบอร์โทร"},{accessorKey:"tax_id",header:"TaxID"},{id:"actions",header:"Actions",cell:({row:r})=>e.jsxs(L,{children:[e.jsx(H,{asChild:!0,children:e.jsx(m,{size:"icon",variant:"ghost",children:e.jsx("span",{"aria-label":"More actions",children:"⋯"})})}),e.jsxs(B,{className:"p-0 w-auto",children:[e.jsxs(m,{variant:"ghost",className:"w-full justify-start px-3 py-2 hover:bg-muted",onClick:()=>n(r.original),children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsx(R,{asChild:!0,children:e.jsxs(m,{variant:"ghost",className:"w-full justify-start px-3 py-2 text-destructive hover:bg-muted",onClick:()=>d(r.original.id),children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Delete"]})})]})]})}]}function se({open:n,onOpenChange:d,dsState:r,form:o,loading:y}){const{data:t,setData:i,post:j,put:N,reset:u,processing:v,errors:s}=A({name:"",address:"",phone:"",owner_name:"",tax_id:""});c.useEffect(()=>{n&&r=="edit"&&(i("name",o?.name||""),i("address",o?.address||""),i("phone",o?.phone||""),i("owner_name",o?.owner_name||""),i("tax_id",o?.tax_id||""))},[n,o,r]);const w=()=>{t&&(r=="new"?j(f.store().url,{preserveState:!0,onSuccess:()=>{d(!1),g.success("Vendor is created successfully.")},onError:()=>{g.error("Failed to create asset kind.")}}):r=="edit"&&N(f.update(o?.id).url,{preserveState:!0,onSuccess:()=>{g.success("อัปเดตรายการผู้ขายเรียบร้อยแล้ว ✅"),d(!1),u()},onError:()=>{g.error("เกิดข้อผิดพลาดในการบันทึก ❌")}}))};return e.jsx(J,{open:n,onOpenChange:a=>{d(a),r=="new"&&u()},children:e.jsxs(Q,{children:[e.jsxs(W,{children:[e.jsxs(X,{children:[r=="new"?"New":"Edit"," Vendor"]}),e.jsxs(Y,{children:[r=="new"?"Create a new":"Update a"," vendor record in the system."]})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(p,{htmlFor:"name",className:"text-right",children:"Name"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(h,{id:"name",value:t.name,onChange:a=>i("name",a.target.value),className:x("w-full",s.name&&"border-destructive focus-visible:ring-destructive")}),s.name&&e.jsx("p",{className:"mt-1 text-sm text-destructive",children:s.name})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(p,{htmlFor:"address",className:"text-right",children:"Address"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(h,{id:"address",value:t.address,onChange:a=>i("address",a.target.value),className:x("w-full",s.address&&"border-destructive focus-visible:ring-destructive")}),s.address&&e.jsx("p",{className:"mt-1 text-sm text-destructive",children:s.address})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(p,{htmlFor:"phone",className:"text-right",children:"Phone"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(h,{id:"phone",value:t.phone,onChange:a=>i("phone",a.target.value),className:x("w-full",s.phone&&"border-destructive focus-visible:ring-destructive")}),s.phone&&e.jsx("p",{className:"mt-1 text-sm text-destructive",children:s.phone})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(p,{htmlFor:"owner_name",className:"text-right",children:"Contact Name"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(h,{id:"owner_name",value:t.owner_name,onChange:a=>i("owner_name",a.target.value),className:x("w-full",s.owner_name&&"border-destructive focus-visible:ring-destructive")}),s.owner_name&&e.jsx("p",{className:"mt-1 text-sm text-destructive",children:s.owner_name})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(p,{htmlFor:"tax_id",className:"text-right",children:"Tax ID"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(h,{id:"tax_id",value:t.tax_id,onChange:a=>i("tax_id",a.target.value),className:x("w-full",s.tax_id&&"border-destructive focus-visible:ring-destructive")}),s.tax_id&&e.jsx("p",{className:"mt-1 text-sm text-destructive",children:s.tax_id})]})]})]}),e.jsxs(Z,{children:[e.jsx(m,{variant:"outline",type:"button",onClick:()=>d(!1),children:"Cancel"}),e.jsx(m,{onClick:w,disabled:v,children:v?"Saving...":"Save"})]})]})})}const ae=[{title:"Dashboard",href:V().url},{title:"Repository",href:T().url},{title:"Vendors",href:""}];function De(){const{rows:n,filters:d}=F().props,[r,o]=c.useState(d?.search||""),[y,t]=c.useState(!1),[i,j]=c.useState(!1),[N,u]=c.useState("new"),[v,s]=c.useState(null),[w,a]=c.useState(!1),S=ee({openEdit:async l=>{u("edit"),a(!0);try{const k=await(await fetch(f.show(l).url)).json();s(k)}finally{j(!1)}},deleteVendor:l=>{confirm("Are you sure you want to delete this category?")&&b.delete(I.destroy({id:l}).url,{preserveScroll:!0,onStart:()=>t(!0),onFinish:()=>{t(!1),g.info("Asset Categories is deleted.")}})}}),_=()=>{a(!0),u("new"),s(null)},D=l=>{l&&b.get(l,{},{preserveState:!0,preserveScroll:!0,replace:!0,onStart:()=>t(!0),onFinish:()=>t(!1)})},P=()=>{b.get(f.index().url,{search:r},{preserveState:!0,replace:!0,onStart:()=>t(!0),onFinish:()=>t(!1)})};return e.jsxs(K,{breadcrumbs:ae,children:[e.jsx(E,{title:"Categories"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:e.jsxs("div",{className:"relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:[e.jsxs("div",{className:"flex gap-2 p-4",children:[e.jsxs(m,{onClick:_,variant:"outline",children:[e.jsx($,{})," Add"]}),e.jsx(h,{type:"search",placeholder:"Search categories...",value:r,className:"lg:w-xs w-full",onChange:l=>o(l.target.value)}),e.jsx(m,{onClick:P,children:"Search"})]}),y?e.jsx("div",{className:"p-4 space-y-3",children:Array.from({length:10}).map((l,C)=>e.jsx(O,{className:"h-8 w-full"},C))}):n?e.jsxs("div",{className:"p-4",children:[e.jsx(G,{columns:S,data:n.data}),e.jsx("div",{className:"mt-6",children:e.jsx(U,{links:n.links,onPageChange:D})})]}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(M,{className:"h-24 w-24 text-muted-foreground"})})]})}),e.jsx(se,{open:w,onOpenChange:a,form:v,dsState:N})]})}export{De as default};
