import{j as e,b as d,r,u as E,H as P}from"./app-D9K0lIg2.js";import{a as k,d as D,c as N}from"./index-CoNroDVL.js";import{c as v}from"./index-Bid-T30R.js";import{A as F}from"./app-layout-DjmuWQS6.js";import{B as n}from"./button-Cq0MOVKo.js";import{P as L,a as T,b as _,c as H}from"./popover-DKDeY4ci.js";import{L as K}from"./list-CI-Ie8mA.js";import{S as I,T as B}from"./trash-C3FSZoTg.js";import{P as U}from"./placeholder-pattern-DEgDWVpB.js";import{I as x}from"./input-Cdacpup9.js";import{S as q,A as z}from"./pagination-Dd8pkajb.js";import{D as M}from"./datatable-BVwayNB8.js";import{t as y}from"./index-Ct_SG2XW.js";import{D as O,a as R,b as G,c as J,d as Q,e as V}from"./dialog-66DR-adO.js";import{L as j}from"./label-CiFHFGZU.js";/* empty css            */import"./index-CMWG4mbA.js";import"./index-BeC5lqBz.js";import"./index-BSy4OLH8.js";import"./app-img-logo-DWWu-s2u.js";import"./chevron-left-BV2a4pwW.js";function W({openEdit:i,deleteCategory:l}){return[{accessorKey:"id",header:"ID"},{accessorKey:"code",header:"Code"},{accessorKey:"name",header:"Name (TH)"},{accessorKey:"name_en",header:"Name (EN)"},{id:"actions",header:"Actions",cell:({row:s})=>e.jsxs(L,{children:[e.jsx(T,{asChild:!0,children:e.jsx(n,{size:"icon",variant:"ghost",children:e.jsx("span",{"aria-label":"More actions",children:"â‹¯"})})}),e.jsxs(_,{className:"p-0 w-auto",children:[e.jsxs(n,{variant:"ghost",className:"w-full justify-start px-3 py-2 hover:bg-muted",onClick:()=>d.get(k(s.original).url),children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"AssetKind"]}),e.jsxs(n,{variant:"ghost",className:"w-full justify-start px-3 py-2 hover:bg-muted",onClick:()=>i(s.original),children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsx(H,{asChild:!0,children:e.jsxs(n,{variant:"ghost",className:"w-full justify-start px-3 py-2 text-destructive hover:bg-muted",onClick:()=>l(s.original.id),children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Delete"]})})]})]})}]}function X({open:i,onOpenChange:l,categoryData:s,loading:m=!1}){const[h,a]=r.useState(""),[u,c]=r.useState(""),[p,g]=r.useState("");r.useEffect(()=>{s&&(a(s.code||""),c(s.name||""),g(s.name_en||""))},[s]);const f=()=>{s&&d.put(v.update(s.id).url,{code:h,name:u,name_en:p},{preserveState:!0,onSuccess:()=>{l(!1),y.success("Category is updated successfully.")}})};return e.jsx(O,{open:i,onOpenChange:l,children:e.jsxs(R,{children:[e.jsxs(G,{children:[e.jsx(J,{children:"Edit Asset Category"}),e.jsx(Q,{children:"Update asset category information"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(j,{htmlFor:"code",className:"text-right",children:"Code"}),e.jsx(x,{id:"code",value:h,onChange:o=>a(o.target.value),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(j,{htmlFor:"name",className:"text-right",children:"Name (TH)"}),e.jsx(x,{id:"name",value:u,onChange:o=>c(o.target.value),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(j,{htmlFor:"name_en",className:"text-right",children:"Name (EN)"}),e.jsx(x,{id:"name_en",value:p,onChange:o=>g(o.target.value),className:"col-span-3"})]})]}),e.jsxs(V,{children:[e.jsx(n,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(n,{onClick:f,disabled:m,children:m?"Saving...":"Save"})]})]})})}const Y=[{title:"Dashboard",href:D().url},{title:"Asset Categories",href:N().url}];function Ne(){const{rows:i,filters:l}=E().props,[s,m]=r.useState(l?.search||""),[h,a]=r.useState(!1),[u,c]=r.useState(!1),[p,g]=r.useState(null),[f,o]=r.useState(!1),S=W({openEdit:async t=>{c(!0),o(!0);try{const A=await(await fetch(v.show(t).url)).json();g(A)}finally{c(!1)}},deleteCategory:t=>{confirm("Are you sure you want to delete this category?")&&d.delete(v.destroy({id:t}).url,{preserveScroll:!0,onStart:()=>a(!0),onFinish:()=>{a(!1),y.info("Asset Categories is deleted.")}})}}),b=t=>{t&&d.get(t,{},{preserveState:!0,preserveScroll:!0,replace:!0,onStart:()=>a(!0),onFinish:()=>a(!1)})},w=()=>{d.get(N().url,{search:s},{preserveState:!0,replace:!0,onStart:()=>a(!0),onFinish:()=>a(!1)})};return e.jsxs(F,{breadcrumbs:Y,children:[e.jsx(P,{title:"Categories"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:e.jsxs("div",{className:"relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:[e.jsxs("div",{className:"flex gap-2 p-4",children:[e.jsx(x,{type:"search",placeholder:"Search categories...",value:s,className:"lg:w-xs w-full",onChange:t=>m(t.target.value)}),e.jsx(n,{onClick:w,children:"Search"})]}),h?e.jsx("div",{className:"p-4 space-y-3",children:Array.from({length:10}).map((t,C)=>e.jsx(q,{className:"h-8 w-full"},C))}):i?e.jsxs("div",{className:"p-4",children:[e.jsx(M,{columns:S,data:i.data}),e.jsx("div",{className:"mt-6",children:e.jsx(z,{links:i.links,onPageChange:b})})]}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(U,{className:"h-24 w-24 text-muted-foreground"})})]})}),e.jsx(X,{open:f,onOpenChange:o,categoryData:p,loading:u})]})}export{Ne as default};
