import{j as e,b as v,r,a as U,u as R,H as O}from"./app-D9K0lIg2.js";import{d as q,c as k}from"./index-CoNroDVL.js";import{A as z}from"./app-layout-DjmuWQS6.js";import{c as B,B as o,a as b}from"./button-Cq0MOVKo.js";import{P as G,a as J,b as Q,c as V}from"./popover-DKDeY4ci.js";import{a as W}from"./index-CSYN4WWv.js";import{S as X,T as Y}from"./trash-C3FSZoTg.js";import{P as Z}from"./placeholder-pattern-DEgDWVpB.js";import{I as h}from"./input-Cdacpup9.js";import{S as $,A as ee}from"./pagination-Dd8pkajb.js";import{D as se}from"./datatable-BVwayNB8.js";import{D as w,a as A,b as D,c as F,d as P,e as E}from"./dialog-66DR-adO.js";import{L as x}from"./label-CiFHFGZU.js";import{t as N}from"./index-Ct_SG2XW.js";import{a as _}from"./index-DdjQXXqZ.js";import{C as te}from"./circle-plus-CoWCO5BP.js";/* empty css            */import"./index-CMWG4mbA.js";import"./index-BeC5lqBz.js";import"./index-BSy4OLH8.js";import"./app-img-logo-DWWu-s2u.js";import"./chevron-left-BV2a4pwW.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M9.5 8h5",key:"11mslq"}],["path",{d:"M9.5 12H16",key:"ktog6x"}],["path",{d:"M9.5 16H14",key:"p1seyn"}]],re=B("NotebookText",ae);function ie({openEdit:i,deleteAssetKind:l}){return[{accessorKey:"id",header:"ID"},{accessorKey:"asset_code",header:"Code"},{accessorKey:"type_name",header:"Name (TH)"},{accessorKey:"useful_life",header:"Useful Life"},{accessorKey:"depreciation_rate",header:"Depreciation Rate"},{id:"actions",header:"Actions",cell:({row:s})=>e.jsxs(G,{children:[e.jsx(J,{asChild:!0,children:e.jsx(o,{size:"icon",variant:"ghost",children:e.jsx("span",{"aria-label":"More actions",children:"â‹¯"})})}),e.jsxs(Q,{className:"p-0 w-auto",children:[e.jsxs(o,{variant:"ghost",className:"w-full justify-start px-3 py-2 hover:bg-muted",onClick:()=>v.get(W.index(s.original.id).url),children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),"Assets"]}),e.jsxs(o,{variant:"ghost",className:"w-full justify-start px-3 py-2 hover:bg-muted",onClick:()=>i(s.original),children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsx(V,{asChild:!0,children:e.jsxs(o,{variant:"ghost",className:"w-full justify-start px-3 py-2 text-destructive hover:bg-muted",onClick:()=>l(s.original.id),children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Delete"]})})]})]})}]}function le({open:i,onOpenChange:l,assetKindData:s,loading:g=!1}){const[n,c]=r.useState(""),[d,f]=r.useState(""),[p,a]=r.useState(0),[j,t]=r.useState(0);r.useEffect(()=>{s&&(c(s.asset_code||""),f(s.type_name||""),a(s.useful_life),t(s.depreciation_rate))},[s]);const y=()=>{s&&v.put(_.update(s.id).url,{asset_code:n,type_name:d,useful_life:p,depreciation_rate:j},{preserveState:!0,onSuccess:()=>{l(!1),N.success("Category is updated successfully.")}})};return e.jsx(w,{open:i,onOpenChange:l,children:e.jsxs(A,{children:[e.jsxs(D,{children:[e.jsx(F,{children:"Edit Assetkind"}),e.jsx(P,{children:"Update asset category information"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(x,{htmlFor:"asset_code",className:"text-right",children:"Code"}),e.jsx(h,{id:"asset_code",value:n,onChange:u=>c(u.target.value),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(x,{htmlFor:"type_name",className:"text-right",children:"Name (TH)"}),e.jsx(h,{id:"type_name",value:d,onChange:u=>f(u.target.value),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(x,{htmlFor:"useful_life",className:"text-right",children:"Useful Life"}),e.jsx(h,{id:"useful_life",value:p,onChange:u=>a(u.target.value),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(x,{htmlFor:"depreciation_rate",className:"text-right",children:"Depreciation Rate"}),e.jsx(h,{id:"depreciation_rate",type:"number",value:j,onChange:u=>t(u.target.value),className:"col-span-3"})]})]}),e.jsxs(E,{children:[e.jsx(o,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(o,{onClick:y,disabled:g,children:g?"Saving...":"Save"})]})]})})}function ce({open:i,onOpenChange:l,currentCategory:s,loading:g}){const{data:n,setData:c,post:d,reset:f,processing:p,errors:a}=U({asset_category_id:0,asset_code:"",type_name:"",useful_life:0,depreciation_rate:0});r.useEffect(()=>{i&&s&&(c("asset_category_id",s.id),fetch(_.nextcode(s.id).url).then(t=>t.json()).then(t=>{c("asset_code",t.next_code)}).catch(()=>N.error("Cannot load next asset code")))},[i,s]);const j=()=>{n&&d(_.store().url,{preserveState:!0,onSuccess:()=>{N.success("Asset kind created successfully."),l(!1),f()},onError:()=>{N.error("Failed to create asset kind.")}})};return e.jsx(w,{open:i,onOpenChange:t=>{l(t),t||f()},children:e.jsxs(A,{children:[e.jsxs(D,{children:[e.jsx(F,{children:"New Assetkind"}),e.jsxs(P,{children:['Create a new assetkind under the "',s.name_en,'".']})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(x,{htmlFor:"asset_code",className:"text-right",children:"Code"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(h,{id:"asset_code",value:n.asset_code,onChange:t=>c("asset_code",t.target.value),className:b("w-full",a.asset_code&&"border-destructive focus-visible:ring-destructive")}),a.asset_code&&e.jsx("p",{className:"mt-1 text-sm text-destructive",children:a.asset_code})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(x,{htmlFor:"type_name",className:"text-right",children:"Name (TH)"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(h,{id:"type_name",value:n.type_name,onChange:t=>c("type_name",t.target.value),className:b("w-full",a.type_name&&"border-destructive focus-visible:ring-destructive")}),a.type_name&&e.jsx("p",{className:"mt-1 text-sm text-destructive",children:a.type_name})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(x,{htmlFor:"useful_life",className:"text-right",children:"Useful Life"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(h,{id:"useful_life",type:"number",value:n.useful_life,onChange:t=>c("useful_life",parseInt(t.target.value)||0),className:b("w-full",a.useful_life&&"border-destructive focus-visible:ring-destructive")}),a.useful_life&&e.jsx("p",{className:"mt-1 text-sm text-destructive",children:a.useful_life})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(x,{htmlFor:"depreciation_rate",className:"text-right",children:"Depreciation Rate"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(h,{id:"depreciation_rate",type:"number",value:n.depreciation_rate,onChange:t=>c("depreciation_rate",parseFloat(t.target.value)||0),className:b("w-full",a.depreciation_rate&&"border-destructive focus-visible:ring-destructive")}),a.depreciation_rate&&e.jsx("p",{className:"mt-1 text-sm text-destructive",children:a.depreciation_rate})]})]})]}),e.jsxs(E,{children:[e.jsx(o,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(o,{onClick:j,disabled:p,children:p?"Saving...":"Save"})]})]})})}function Ee(){const{rows:i,filters:l,category:s}=R().props,[g,n]=r.useState(l?.search),[c,d]=r.useState(!1),[f,p]=r.useState(!1),[a,j]=r.useState(null),[t,y]=r.useState(!1),[u,C]=r.useState(!1),T=[{title:"Dashboard",href:q().url},{title:"Asset Categories",href:k().url},{title:s.name??"",href:""}],L=async()=>{y(!0)},K=ie({openEdit:async m=>{p(!0),C(!0);try{const I=await(await fetch(_.show(m).url)).json();j(I)}finally{p(!1)}},deleteAssetKind:m=>{confirm("Are you sure you want to delete this category?")&&v.delete(_.destroy({id:m}).url,{preserveScroll:!0,onFinish:()=>{N.info("Asset Categories is deleted.")}})}}),H=m=>{m&&v.get(m,{},{preserveState:!0,preserveScroll:!0,replace:!0,onStart:()=>d(!0),onFinish:()=>d(!1)})},M=()=>{v.get(k().url,{search:g},{preserveState:!0,replace:!0,onStart:()=>d(!0),onFinish:()=>d(!1)})};return e.jsxs(z,{breadcrumbs:T,children:[e.jsx(O,{title:s.name}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:e.jsxs("div",{className:"relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:[e.jsxs("div",{className:"flex gap-2 p-4",children:[e.jsxs(o,{onClick:L,variant:"outline",children:[e.jsx(te,{})," Add"]}),e.jsx(h,{type:"search",placeholder:"Search categories...",value:g,className:"lg:w-xs w-full",onChange:m=>n(m.target.value)}),e.jsx(o,{onClick:M,children:"Search"})]}),c?e.jsx("div",{className:"p-4 space-y-3",children:Array.from({length:10}).map((m,S)=>e.jsx($,{className:"h-8 w-full"},S))}):i?e.jsxs("div",{className:"p-4",children:[e.jsx(se,{columns:K,data:i.data}),e.jsx("div",{className:"mt-6",children:e.jsx(ee,{links:i.links,onPageChange:H})})]}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(Z,{className:"h-24 w-24 text-muted-foreground"})})]})}),e.jsx(ce,{open:t,onOpenChange:y,currentCategory:s}),e.jsx(le,{open:u,onOpenChange:C,assetKindData:a,loading:f})]})}export{Ee as default};
